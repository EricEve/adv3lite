<html>
<head><link rel=stylesheet type="text/css" href="../libref.css"><title>Action</title></head><body>
<table class=ban><tr><td align=left><span class=title>Action</span><span class=type>class</span><td align=right><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#22">22</a>], <a href="../file/english.t.html">english.t</a>[<a href="../source/english.t.html#5389">5389</a>], <a href="../file/objtime.t.html">objtime.t</a>[<a href="../source/objtime.t.html#173">173</a>], <a href="../file/sysrules.t.html">sysrules.t</a>[<a href="../source/sysrules.t.html#340">340</a>]</table><p>
<table class=nav><tr>
<td><a href="#_SuperClassTree_">Superclass<br>Tree</a>
<td><a href="#_SubClassTree_">Subclass<br>Tree</a>
<td><a href="#_ObjectSummary_">Global<br>Objects</a>
<td><a href="#_PropSummary_">Property<br>Summary</a>
<td><a href="#_MethodSummary_">Method<br>Summary</a>
<td><a href="#_Properties_">Property<br>Details</a>
<td><a href="#_Methods_">Method<br>Details</a>
</table><div class=fdesc>
   The library doesn't yet provide any support for actions that take three   objects (TIAActions, as they might hypothetically be called), but since the   Mercury parser does we provide a number of hooks that other code could use.   To this end we need to define the properties a TIAAction might use so the   compiler recognizes them. 
<p><i>Modified in <a href="../file/english.t.html">english.t</a>[<a href="../source/english.t.html#5389">5389</a>]:</i><br>
   Language-specific modifications to Action classes principally to enable the   construction of implicit action announcements. 
<p><i>Modified in <a href="../file/objtime.t.html">objtime.t</a>[<a href="../source/objtime.t.html#173">173</a>]:</i><br>
  Modifications to the Action class for use with the OBJTIME EXTENSION.  The purpose of these modifications is to advance the game clock each turn. 
<p>
<code>class 
<b>Action</b> :  &nbsp; <a href="../object/ReplaceRedirector.html">ReplaceRedirector</a></code>
</div>
<a name="_SuperClassTree_"></a><p><div class=mjhd><span class=hdln>Superclass Tree</span> &nbsp; (in declaration order)</div><p>
<code><b>Action</b></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp; <a href="../object/ReplaceRedirector.html">ReplaceRedirector</a></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp; <a href="../object/Redirector.html">Redirector</a></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp; object</code><br>
<a name="_SubClassTree_"></a><p><div class=mjhd><span class=hdln>Subclass Tree</span> &nbsp; </div><p>
<code><b>Action</b></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp; <a href="../object/IAction.html">IAction</a></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp; <a href="../object/LiteralAction.html">LiteralAction</a></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp; <a href="../object/MiscConvAction.html">MiscConvAction</a></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp; <a href="../object/NumericAction.html">NumericAction</a></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp; <a href="../object/SystemAction.html">SystemAction</a></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp; <a href="../object/FileOpAction.html">FileOpAction</a></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp; <a href="../object/TopicAction.html">TopicAction</a></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp; <a href="../object/ImplicitConversationAction.html">ImplicitConversationAction</a></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp; <a href="../object/TAction.html">TAction</a></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp; <a href="../object/LiteralTAction.html">LiteralTAction</a></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp; <a href="../object/NumericTAction.html">NumericTAction</a></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp; <a href="../object/TIAction.html">TIAction</a></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp; <a href="../object/TIAAction.html">TIAAction</a></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp; <a href="../object/TopicTAction.html">TopicTAction</a></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp; <a href="../object/TravelAction.html">TravelAction</a></code><br>
<a name="_ObjectSummary_"></a><p><div class=mjhd><span class=hdln>Global Objects</span> &nbsp; </div><p>
<code>
<a href="../object/FootnotesFullAction.html">FootnotesFullAction</a>&nbsp; 
<a href="../object/FootnotesMediumAction.html">FootnotesMediumAction</a>&nbsp; 
<a href="../object/FootnotesOffAction.html">FootnotesOffAction</a>&nbsp; 
<a href="../object/Record.html">Record</a>&nbsp; 
<a href="../object/RecordEvents.html">RecordEvents</a>&nbsp; 
<a href="../object/RecordEventsString.html">RecordEventsString</a>&nbsp; 
<a href="../object/RecordString.html">RecordString</a>&nbsp; 
<a href="../object/Replay.html">Replay</a>&nbsp; 
<a href="../object/ReplayString.html">ReplayString</a>&nbsp; 
<a href="../object/RestoreString.html">RestoreString</a>&nbsp; 
<a href="../object/Save.html">Save</a>&nbsp; 
<a href="../object/SaveString.html">SaveString</a>&nbsp; 
<a href="../object/ScriptOn.html">ScriptOn</a>&nbsp; 
<a href="../object/ScriptString.html">ScriptString</a>&nbsp; 
</code>
<a name="_PropSummary_"></a><p><div class=mjhd><span class=hdln>Summary of Properties</span> &nbsp; </div><p>
<code>
<a href="#actionFailed">actionFailed</a>&nbsp; 
<a href="#advanceOnFailure">advanceOnFailure</a>&nbsp; 
<a href="#againRepeatsParse">againRepeatsParse</a>&nbsp; 
<a href="#allowAll">allowAll</a>&nbsp; 
<a href="#extraMessageParams">extraMessageParams</a>&nbsp; 
<a href="#failCheckMsg">failCheckMsg</a>&nbsp; 
<a href="#failedActionCountsAsTurn">failedActionCountsAsTurn</a>&nbsp; 
<a href="#implicitTimeTaken">implicitTimeTaken</a>&nbsp; 
<a href="#includeInUndo">includeInUndo</a>&nbsp; 
<a href="#isConversational">isConversational</a>&nbsp; 
<a href="#isImplicit">isImplicit</a>&nbsp; 
<a href="#isRepeatable">isRepeatable</a>&nbsp; 
<a href="#oldRoom">oldRoom</a>&nbsp; 
<a href="#parentAction">parentAction</a>&nbsp; 
<a href="#parentAllowAll">parentAllowAll</a>&nbsp; 
<a href="#preCond">preCond</a>&nbsp; 
<a href="#redirectParent">redirectParent</a>&nbsp; 
<a href="#reportImplicitActions">reportImplicitActions</a>&nbsp; 
<a href="#scopeList">scopeList</a>&nbsp; 
<a href="#spellingPriority">spellingPriority</a>&nbsp; 
<a href="#synthParamID">synthParamID</a>&nbsp; 
<a href="#timeTaken">timeTaken</a>&nbsp; 
<a href="#turnsTaken">turnsTaken</a>&nbsp; 
<a href="#unhides">unhides</a>&nbsp; 
<a href="#verifyObj">verifyObj</a>&nbsp; 
<a href="#wasIlluminated">wasIlluminated</a>&nbsp; 
</code><p>
<code>
</code><p>
<code>
</code><p>
<a name="_MethodSummary_"></a><p><div class=mjhd><span class=hdln>Summary of Methods</span> &nbsp; </div><p>
<code>
<a href="#acknowledgeNotifyStatus">acknowledgeNotifyStatus</a>&nbsp; 
<a href="#addExtraScopeItems">addExtraScopeItems</a>&nbsp; 
<a href="#addImplicitTime">addImplicitTime</a>&nbsp; 
<a href="#advanceTime">advanceTime</a>&nbsp; 
<a href="#afterAction">afterAction</a>&nbsp; 
<a href="#announceObject">announceObject</a>&nbsp; 
<a href="#beforeAction">beforeAction</a>&nbsp; 
<a href="#buildImplicitActionAnnouncement">buildImplicitActionAnnouncement</a>&nbsp; 
<a href="#buildScopeList">buildScopeList</a>&nbsp; 
<a href="#checkAction">checkAction</a>&nbsp; 
<a href="#checkActionPreconditions">checkActionPreconditions</a>&nbsp; 
<a href="#commandNotPresent">commandNotPresent</a>&nbsp; 
<a href="#exec">exec</a>&nbsp; 
<a href="#execAction">execAction</a>&nbsp; 
<a href="#execCycle">execCycle</a>&nbsp; 
<a href="#execGroup">execGroup</a>&nbsp; 
<a href="#getAll">getAll</a>&nbsp; 
<a href="#getAllUnhidden">getAllUnhidden</a>&nbsp; 
<a href="#getMessageParam">getMessageParam</a>&nbsp; 
<a href="#implicitAnnouncement">implicitAnnouncement</a>&nbsp; 
<a href="#reportAction">reportAction</a>&nbsp; 
<a href="#scoreObjects">scoreObjects</a>&nbsp; 
<a href="#setMessageParam">setMessageParam</a>&nbsp; 
<a href="#setMessageParams">setMessageParams</a>&nbsp; 
<a href="#spPrefix">spPrefix</a>&nbsp; 
<a href="#spSuffix">spSuffix</a>&nbsp; 
<a href="#synthMessageParam">synthMessageParam</a>&nbsp; 
<a href="#turnSequence">turnSequence</a>&nbsp; 
<a href="#verify">verify</a>&nbsp; 
<a href="#verifyObjRole">verifyObjRole</a>&nbsp; 
<a href="#wrapObjectsNP">wrapObjectsNP</a>&nbsp; 
</code><p>
<p>Inherited from <code>ReplaceRedirector</code> :<br>
<code>
<a href="../object/ReplaceRedirector.html#redirect">redirect</a>&nbsp; 
</code><p>
<p>Inherited from <code>Redirector</code> :<br>
<code>
<a href="../object/Redirector.html#doInstead">doInstead</a>&nbsp; 
<a href="../object/Redirector.html#doNested">doNested</a>&nbsp; 
<a href="../object/Redirector.html#doOtherAction">doOtherAction</a>&nbsp; 
</code><p>
<a name="_Properties_"></a><p><div class=mjhd><span class=hdln>Properties</span> &nbsp; </div><p>
<a name="actionFailed"></a>
<table class=decl><tr><td><code>actionFailed</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#29">29</a>]</table><div class=desc>   Flag; should this action be considered a failure? This should be reset   to true at the start of the action processing cycle but can be tested   later to prevent, e.g., inappropriate reporting. <p>
</div>
<a name="advanceOnFailure"></a>
<table class=decl><tr><td><code>advanceOnFailure</code><td align=right><code><a href="../file/objtime.t.html">objtime.t</a>[<a href="../source/objtime.t.html#190">190</a>]</table><div class=desc>   Flag: should the game time be advanced if this action fails? By default   we allow it to advance, but this can be overridden to nil for actions   that should take no time if they're not carried out. [OBJTIME EXTENSION] <p>
</div>
<a name="againRepeatsParse"></a>
<table class=decl><tr><td><code>againRepeatsParse</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#387">387</a>]</table><div class=desc>   If an AGAIN command is used with this command, should the command be   reparsed from scratch (because it might involve a different object) or   not (because it should act on the same objects). We generally set this   to true for actions it wouldn't normally make sense to repeat on the   same object straight away. Since this applies to the majority of   actions, we make this the default. <p>
</div>
<a name="allowAll"></a>
<table class=decl><tr><td><code>allowAll</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#949">949</a>]</table><div class=desc>   Can ALL be used with this action? By default we take our value from   gameMain.allVerbsAllowAll, though basic inventory-handling actions in   the library will override this. This property is really only relevant   on TAction and its descendents, but we define it here just to make sure   no cases are missed. <p>
</div>
<a name="extraMessageParams"></a>
<table class=decl><tr><td><code>extraMessageParams</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#760">760</a>]</table><div class=desc>   Extra message parameters.  If a message processor wants to add   special message parameters of its own, we'll create a lookup   table for the extra parameters.  Message processors might want to   add their own special parameters to allow referring to objects   other than the main objects of the command. <p>
</div>
<a name="failCheckMsg"></a>
<table class=decl><tr><td><code>failCheckMsg</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#965">965</a>]</table><div class=desc>   The message to display if an action fails at the check stage (via an   exit macro) without any other explanatory text being displayed. <p>
</div>
<a name="failedActionCountsAsTurn"></a>
<table class=decl><tr><td><code>failedActionCountsAsTurn</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#579">579</a>]</table><div class=desc>   Flag, do we want an action that fails at the verify stage to count as a turn (in other   words, if an action fails at the verify stage, do we want to advance the turn   counter,excecute daemons, and do all the other turn sequence stuff)? By default we do,   since this has long been the standard behaviour, but game code can override this to nil   either globally on the Action class on on individual actions to cause failure at the verify   stage to abort the remainder of the turn sequence. <p>
</div>
<a name="implicitTimeTaken"></a>
<table class=decl><tr><td><code>implicitTimeTaken</code><td align=right><code><a href="../file/objtime.t.html">objtime.t</a>[<a href="../source/objtime.t.html#208">208</a>]</table><div class=desc>   The number of seconds to carry out this action as an implicit action.   By default we don't take any, since the normal convention seems to be   to count implicit actions as part of the main action, but this could be   overridden to be, say, the same as timeTaken if zero-time implicit   actions were felt to give an unfair advantage to timed puzzles.   [OBJTIME EXTENSION] <p>
</div>
<a name="includeInUndo"></a>
<table class=decl><tr><td><code>includeInUndo</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#365">365</a>]</table><div class=desc>Can this action be Undone? By default most actions can.<p>
</div>
<a name="isConversational"></a>
<table class=decl><tr><td><code>isConversational</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#368">368</a>]</table><div class=desc>Flag: is this a conversational action?<p>
</div>
<a name="isImplicit"></a>
<table class=decl><tr><td><code>isImplicit</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#362">362</a>]</table><div class=desc>Flag: is this an implicit action? By default it isn't.<p>
</div>
<a name="isRepeatable"></a>
<table class=decl><tr><td><code>isRepeatable</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#376">376</a>]</table><div class=desc>   Is this action repeatable (with an AGAIN command)? Most actions are so   the default is true but subclasses can override to exclude actions   (such as certain system actions) that it would make no sense to repeat. <p>
</div>
<a name="oldRoom"></a>
<table class=decl><tr><td><code>oldRoom</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#136">136</a>]</table><div class=desc>The room the actor was in when the action started<p>
</div>
<a name="parentAction"></a>
<table class=decl><tr><td><code>parentAction</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#406">406</a>]</table><div class=desc>   Do we have a parent action, and if so what is it? The parent action   would be the action that's using us as an implicit action or nested   action. <p>
</div>
<a name="parentAllowAll"></a>
<table class=decl><tr><td><code>parentAllowAll</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#958">958</a>]</table><div class=desc>Does the command from which we've been redirected allow ALL?<p>
</div>
<a name="preCond"></a>
<table class=decl><tr><td><code>preCond</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#146">146</a>]</table><div class=desc>   A list of any PreConditions that apply to this action as a whole, as   opposed to any of its objects. This is most likely to be relevant to an   IAction. <p>
</div>
<a name="redirectParent"></a>
<table class=decl><tr><td><code>redirectParent</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#955">955</a>]</table><div class=desc>   If we've been redirected here from another action, store a reference to   that action. <p>
</div>
<a name="reportImplicitActions"></a>
<table class=decl><tr><td><code>reportImplicitActions</code><td align=right><code><a href="../file/english.t.html">english.t</a>[<a href="../source/english.t.html#5418">5418</a>]</table><div class=desc>   Flag - do we want to show implicit action reports for this action? By   default we do. <p>
</div>
<a name="scopeList"></a>
<table class=decl><tr><td><code>scopeList</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#937">937</a>]</table><div class=desc>Our currently cached list of items in scope for this action.<p>
</div>
<a name="spellingPriority"></a>
<table class=decl><tr><td><code>spellingPriority</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#940">940</a>]</table><div class=desc>Used by Mercury's spelling corrector code.<p>
</div>
<a name="synthParamID"></a>
<table class=decl><tr><td><code>synthParamID</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#751">751</a>]</table><div class=desc>synthesized message object parameter serial number<p>
</div>
<a name="timeTaken"></a>
<table class=decl><tr><td><code>timeTaken</code><td align=right><code><a href="../file/objtime.t.html">objtime.t</a>[<a href="../source/objtime.t.html#198">198</a>]</table><div class=desc>   The number of seconds it takes to carry out this action. By default we   assume every action takes one minute, but this can be overridden either   globally on the Action class or individually on each actiom.   [OBJTIME EXTENSION] <p>
</div>
<a name="turnsTaken"></a>
<table class=decl><tr><td><code>turnsTaken</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#359">359</a>]</table><div class=desc>   The number of turns this action is counted as taking. Normally, this   will be 1. <p>
</div>
<a name="unhides"></a>
<table class=decl><tr><td><code>unhides</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#987">987</a>]</table><div class=desc>   Flag: is this an action that acts on an object even if it is hidden;   normally this will only apply to debugging actions. <p>
</div>
<a name="verifyObj"></a>
<table class=decl><tr><td><code>verifyObj</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#664">664</a>]</table><div class=desc>The object currently being verified<p>
</div>
<a name="wasIlluminated"></a>
<table class=decl><tr><td><code>wasIlluminated</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#139">139</a>]</table><div class=desc>Flag to indicate whether the actor's location started out illuminated<p>
</div>
<a name="_Methods_"></a><p><div class=mjhd><span class=hdln>Methods</span> &nbsp; </div><p>
<a name="acknowledgeNotifyStatus"></a>
<table class=decl><tr><td><code>acknowledgeNotifyStatus (stat)</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#977">977</a>]</table><div class=desc>acknowledge a change in the score notification status<p>
</div>
<a name="addExtraScopeItems"></a>
<table class=decl><tr><td><code>addExtraScopeItems (role?)</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#931">931</a>]</table><div class=desc>   Add extra scope items if this action needs a wider definition of scope   than normal. By default we simply allow the current actor's current   location to add additional items to scope if it wishes to. <p>
</div>
<a name="addImplicitTime"></a>
<table class=decl><tr><td><code>addImplicitTime ( )</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#993">993</a>], <a href="../file/objtime.t.html">objtime.t</a>[<a href="../source/objtime.t.html#214">214</a>]</table><div class=desc>   This does nothing in the main library but is provided as a hook for the   objtime extension to use to add to the time taken by implicit actions. <p>
<p><i>Modified in <a href="../file/objtime.t.html">objtime.t</a>[<a href="../source/objtime.t.html#214">214</a>]:</i><br>
  Add our implicitTimeTaken to the total time taken for the turn.  [OBJTIME EXTENSION] <p>
</div>
<a name="advanceTime"></a>
<table class=decl><tr><td><code>advanceTime ( )</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#999">999</a>], <a href="../file/objtime.t.html">objtime.t</a>[<a href="../source/objtime.t.html#176">176</a>]</table><div class=desc>   Advance the game clock time. This does nothing in the main library but   is provided as a hook for the objtime extension to use. <p>
<p><i>Modified in <a href="../file/objtime.t.html">objtime.t</a>[<a href="../source/objtime.t.html#176">176</a>]:</i><br>
Advance the notional game time [OBJTIME EXTENSION]<p>
</div>
<a name="afterAction"></a>
<table class=decl><tr><td><code>afterAction ( )</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#262">262</a>], <a href="../file/sysrules.t.html">sysrules.t</a>[<a href="../source/sysrules.t.html#352">352</a>]</table><div class=desc>   Carry out the post-action processing. This first checks to see if   there's been a change in illumination. If there has we either show a   room description (if the actor's location is now lit) or announce the   onset of darkness. We then call the after action notifications first on   the actor's current room and then on every object in scope. <p>   Note that afterAction() is called from the current Command object. <p>
<p><i>Modified in <a href="../file/sysrules.t.html">sysrules.t</a>[<a href="../source/sysrules.t.html#352">352</a>]:</i><br>
   Carry out the post-action processing. This first checks to see if   there's been a change in illumination. If there has we either show a   room description (if the actor's location is now lit) or announce the   onset of darkness. We then call the after action notifications first on   the actor's current room and then on every object in scope. <p>   Note that afterAction() is called from the current Command object.   [MODIFIED FOR SYSRULES EXTENSION] <p>
</div>
<a name="announceObject"></a>
<table class=decl><tr><td><code>announceObject (obj)</code><td align=right><code><a href="../file/english.t.html">english.t</a>[<a href="../source/english.t.html#5538">5538</a>]</table><div class=desc>   Announce an object (for use to introduce a report on what an action   does to particular object when it's one of a number of objects the   actions is acting upon) <p>
</div>
<a name="beforeAction"></a>
<table class=decl><tr><td><code>beforeAction ( )</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#209">209</a>], <a href="../file/sysrules.t.html">sysrules.t</a>[<a href="../source/sysrules.t.html#377">377</a>]</table><div class=desc>Return our overall check result.<p>
<p><i>Modified in <a href="../file/sysrules.t.html">sysrules.t</a>[<a href="../source/sysrules.t.html#377">377</a>]:</i><br>
[MODIFIED FOR SYSRULES EXTENSION] Use the beforeRules RuleBook to carry out the before action handling.<p>
</div>
<a name="buildImplicitActionAnnouncement"></a>
<table class=decl><tr><td><code>buildImplicitActionAnnouncement (success, clearReports, =, true)</code><td align=right><code><a href="../file/english.t.html">english.t</a>[<a href="../source/english.t.html#5427">5427</a>]</table><div class=desc>   Construct the announcement of an implicit action according to whether   the implict action succeeds (success = true) or fails (success = nil) <p>   [Required] <p>
</div>
<a name="buildScopeList"></a>
<table class=decl><tr><td><code>buildScopeList (whichRole, =, DirectObject)</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#915">915</a>]</table><div class=desc>Build the scope list for this action.<p>
</div>
<a name="checkAction"></a>
<table class=decl><tr><td><code>checkAction ( )</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#46">46</a>]</table><div class=desc>   The checkAction() method calls the check routines on the objects   involved in the command (where there are objects). Subclasses such as   TAction and TIAction need to override this to carry out the appropriate   handling. <p>
</div>
<a name="checkActionPreconditions"></a>
<table class=decl><tr><td><code>checkActionPreconditions ( )</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#148">148</a>]</table><div class=desc><i>no description available</i><p>
</div>
<a name="commandNotPresent"></a>
<table class=decl><tr><td><code>commandNotPresent ( )</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#969">969</a>]</table><div class=desc>optional command is not supported in this game<p>
</div>
<a name="exec"></a>
<table class=decl><tr><td><code>exec (cmd)</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#53">53</a>]</table><div class=desc>   The main routine for handling an action. This is the method called by   the command object; the cmd parameter gives the calling Command object. <p>
</div>
<a name="execAction"></a>
<table class=decl><tr><td><code>execAction (cmd)</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#131">131</a>]</table><div class=desc>The main action handler. Subclasses must override.<p>
</div>
<a name="execCycle"></a>
<table class=decl><tr><td><code>execCycle (cmd)</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#88">88</a>]</table><div class=desc>   The action-processing cycle carries out the before action   notifications, then executes the action. This needs to be overridden on   various subclasses since the beforeAction notifications can occur at   different points in different kinds of action. <p>
</div>
<a name="execGroup"></a>
<table class=decl><tr><td><code>execGroup (cmd)</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#38">38</a>]</table><div class=desc>   The execGroup() method is called by the current Command object before   it calls the action on individual objects, to allow processing of the   group of objects as a whole. By default we do nothing here in the   library. <p>
</div>
<a name="getAll"></a>
<table class=decl><tr><td><code>getAll (cmd, role)</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#770">770</a>]</table><div class=desc>   Get a list of all the objects that this action should act on if the   player typed ALL for role (DirectObject, IndirectObject, or perhaps in   some future version of the library, AccessoryObject. This is the method   that can be overridden on subclasses to give action-specific   definitions of ALL. <p>
</div>
<a name="getAllUnhidden"></a>
<table class=decl><tr><td><code>getAllUnhidden (cmd, role)</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#784">784</a>]</table><div class=desc>   Get a list of all the objects this action will act on if the player   types ALL for role (DirectObject or IndirectObject). This is the method   actually called by the Parser. We first obtain the list of objects   returned by getAll() and then filter out any objects for which   hideFromAll(action) is true for this action. Subclasses should normally   override getAll() rather than this method. <p>
</div>
<a name="getMessageParam"></a>
<table class=decl><tr><td><code>getMessageParam (objName)</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#672">672</a>]</table><div class=desc>   Get a message parameter object for the action.  Each action   subclass defines this to return its objects according to its own   classifications.  The default action has no objects, but   recognizes 'actor' as the current command's actor. <p>
</div>
<a name="implicitAnnouncement"></a>
<table class=decl><tr><td><code>implicitAnnouncement (success)</code><td align=right><code><a href="../file/english.t.html">english.t</a>[<a href="../source/english.t.html#5520">5520</a>]</table><div class=desc>   Return a string giving the implicit action announcement for the current   action according to whether it's a success (e.g. "taking the spoon") or   a failure (e.g. "trying to take the spoon"). We make this a separate   method to make it a little easier for game code to customize implicit   action announcements. <p>   A return value of nil will suppress the implicit action report for this   action altogeher. <p>
</div>
<a name="reportAction"></a>
<table class=decl><tr><td><code>reportAction ( )</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#398">398</a>]</table><div class=desc>   Report on the action. This is only relevant where the action has more   or one objects, so TAction must override. This is called from the   current Command object once all the objects have been acted on (in a   case where multiple direct objects have been specified, as in TAKE ALL   or TAKE RED BALL AND GREEN PEN). This allows the report routine to   summarize the action for all the objects acted upon instead of   displaying an individual report for each one. <p>
</div>
<a name="scoreObjects"></a>
<table class=decl><tr><td><code>scoreObjects (cmd, role, lst)</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#830">830</a>]</table><div class=desc>   Score a set of objects in a given noun role in the action, in   order to resolve an ambiguous command.  Our job, in brief, is to   READ THE PLAYER'S MIND: we want to figure out which object or   objects the player is actually referring to when their words are   ambiguous. <p>   'cmd' is the Command object describing the command.  The various   object lists (dobjs, iobjs, accs) have been filled in with the   in-scope objects that match the noun phrase, but these haven't   been disambiguated yet, so there might be more objects listed than   will actually be used in the final command. <p>   'role' tells us the noun phrase role that we're scoring   (DirectObject, IndirectObject, AccessoryObject, TopicRole,   LiteralRole). <p>   'lst' is the match list.  This is a Vector containing NPMatch   objects.  There's one NPMatch for each object that we're   considering as a match for the player's noun phrase. <p>   For each item in the match list, we must set the NPMatch object's   'score' property to a number indicating how likely we think it is   that the player is referring to this object.  The higher the   score, the more likely we think it is.  The score value is purely   relative - the caller will pick the object or objects with the   highest score. <p> <p> <p>   We run through the verify routine for each object, which in turn   runs through the preconditions of that object. We take the returned   verify score to be the score for the object (or its replacement if   remapping took place). <p>   Next, we do any verb-specific adjustments via self.actionScore(). <p>   Finally, we call each object's scoreObject() routine to give the   object a chance to make any adjustments for special affinities (or   aversions). <p>
</div>
<a name="setMessageParam"></a>
<table class=decl><tr><td><code>setMessageParam (objName, obj)</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#708">708</a>]</table><div class=desc>   Define an extra message-specific parameter.  Message processors   can use this to add their own special parameters, so that they   can refer to parameters that aren't involved directly in the   command.  For example, a message for "take &lt;dobj&gt;" might want to   refer to the object containing the direct object. <p>
</div>
<a name="setMessageParams"></a>
<table class=decl><tr><td><code>setMessageParams ([lst])</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#725">725</a>]</table><div class=desc>   For convenience, this method allows setting any number of   name/value pairs for message parameters. <p>
</div>
<a name="spPrefix"></a>
<table class=decl><tr><td><code>spPrefix (str)</code><td align=right><code><a href="../file/english.t.html">english.t</a>[<a href="../source/english.t.html#5530">5530</a>]</table><div class=desc>add a space prefix/suffix to a string if the string is non-empty<p>
</div>
<a name="spSuffix"></a>
<table class=decl><tr><td><code>spSuffix (str)</code><td align=right><code><a href="../file/english.t.html">english.t</a>[<a href="../source/english.t.html#5531">5531</a>]</table><div class=desc><i>no description available</i><p>
</div>
<a name="synthMessageParam"></a>
<table class=decl><tr><td><code>synthMessageParam (obj)</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#736">736</a>]</table><div class=desc>   Synthesize a global message parameter name for the given object.   We'll store the association and return the synthesized name. <p>
</div>
<a name="turnSequence"></a>
<table class=decl><tr><td><code>turnSequence ( )</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#327">327</a>], <a href="../file/sysrules.t.html">sysrules.t</a>[<a href="../source/sysrules.t.html#406">406</a>]</table><div class=desc>   The turnSequence() method is called from the current Command object. It   first executes any current daemons (apart from any PromptDaemons) and   then advances the turn counter. We define this on the Action class   principally to make it simple for certain kinds of Action such as   SystemActions to do nothing here (since they don't count as actions   within the game world). <p>
<p><i>Modified in <a href="../file/sysrules.t.html">sysrules.t</a>[<a href="../source/sysrules.t.html#406">406</a>]:</i><br>
 [MODIFIED FOR SYSRULES EXTENSION] Use the turnEnd RuleBook to carry out the end-of-turn processing. <p>
</div>
<a name="verify"></a>
<table class=decl><tr><td><code>verify (obj, role)</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#415">415</a>]</table><div class=desc>   Carry out the verification stage for this object in this role, and   carry out any remapping needed. This needs to be defined on Action   since there might be verification of the ActorRole. <p>
</div>
<a name="verifyObjRole"></a>
<table class=decl><tr><td><code>verifyObjRole (obj, role)</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#589">589</a>]</table><div class=desc>   Run the verify routine on the current object in the current role to see   whether it will allow the action. If it won't, display any pending   implicit action announcements, then display the message explaining why   the action is disallowed, and finally return nil to tell our caller to   halt the action. If the verify stage does allow the action to go ahead,   return true to tell our caller that this routine has no objection. <p>
</div>
<a name="wrapObjectsNP"></a>
<table class=decl><tr><td><code>wrapObjectsNP (lst)</code><td align=right><code><a href="../file/action.t.html">action.t</a>[<a href="../source/action.t.html#902">902</a>]</table><div class=desc>   Wraps a list of objects in NPMatch objects so they can be run through   the scoreObjects method. <p>
</div>
<div class=ftr>Adv3Lite Library Reference Manual<br>Generated on 25/04/2024 from adv3Lite version 2.0</div>
</body>
</html>
