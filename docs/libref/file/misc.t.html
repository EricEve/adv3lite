<html>
<head><link rel=stylesheet type="text/css" href="../libref.css"><title>misc.t</title></head><body>
<table class=ban><tr><td align=left><span class=title>misc.t</span><span class=type>file</span><td align=right><a href="../source/misc.t.html">source file</a></table><p>
<table class=nav><tr>
<td><b>Classes</b><br><a href="#_ClassSummary_">Summary</a><br>&nbsp;<td><b>Objects</b><br><a href="#_ObjectSummary_">Summary</a><br>&nbsp;<td><b>Functions</b><br><a href="#_FunctionSummary_">Summary</a><br><a href="#_Functions_">Details</a></table><div class=fdesc>
   Adapted for adv3Lite by Eric Eve <p>   adv3Lite Library - miscellaneous definitions <p>   This module contains miscellaneous definitions that don't have a   natural grouping with any larger modules, and which aren't complex   enough to justify modules of their own. 
</div>
<a name="_ClassSummary_"></a><p><div class=mjhd><span class=hdln>Summary of Classes</span> &nbsp; </div><p>
<code>
<a href="../object/ArgumentMismatchError.html">ArgumentMismatchError</a>&nbsp; 
<a href="../object/BaseObject.html">BaseObject</a>&nbsp; 
<a href="../object/FinishOption.html">FinishOption</a>&nbsp; 
<a href="../object/FinishType.html">FinishType</a>&nbsp; 
<a href="../object/GameMainDef.html">GameMainDef</a>&nbsp; 
<a href="../object/LCS.html">LCS</a>&nbsp; 
<a href="../object/LibraryError.html">LibraryError</a>&nbsp; 
<a href="../object/Script.html">Script</a>&nbsp; 
<a href="../object/SingletonIterator.html">SingletonIterator</a>&nbsp; 
<a href="../object/Tip.html">Tip</a>&nbsp; 
</code>
<a name="_ObjectSummary_"></a><p><div class=mjhd><span class=hdln>Summary of Global Objects</span> &nbsp; </div><p>
<code>
<a href="../object/adv3LibInit.html">adv3LibInit</a>&nbsp; 
<a href="../object/adv3LibPreinit.html">adv3LibPreinit</a>&nbsp; 
<a href="../object/emumTabInitializer.html">emumTabInitializer</a>&nbsp; 
<a href="../object/finishOptionAmusing.html">finishOptionAmusing</a>&nbsp; 
<a href="../object/finishOptionCredits.html">finishOptionCredits</a>&nbsp; 
<a href="../object/finishOptionFullScore.html">finishOptionFullScore</a>&nbsp; 
<a href="../object/finishOptionQuit.html">finishOptionQuit</a>&nbsp; 
<a href="../object/finishOptionRestart.html">finishOptionRestart</a>&nbsp; 
<a href="../object/finishOptionRestore.html">finishOptionRestore</a>&nbsp; 
<a href="../object/finishOptionScore.html">finishOptionScore</a>&nbsp; 
<a href="../object/finishOptionUndo.html">finishOptionUndo</a>&nbsp; 
<a href="../object/firstPersonObj.html">firstPersonObj</a>&nbsp; 
<a href="../object/ftDeath.html">ftDeath</a>&nbsp; 
<a href="../object/ftFailure.html">ftFailure</a>&nbsp; 
<a href="../object/ftGameOver.html">ftGameOver</a>&nbsp; 
<a href="../object/ftVictory.html">ftVictory</a>&nbsp; 
<a href="../object/libGlobal.html">libGlobal</a>&nbsp; 
<a href="../object/libObjectInitializer.html">libObjectInitializer</a>&nbsp; 
<a href="../object/oopsTip.html">oopsTip</a>&nbsp; 
<a href="../object/restoreOptionRestoreAnother.html">restoreOptionRestoreAnother</a>&nbsp; 
<a href="../object/restoreOptionStartOver.html">restoreOptionStartOver</a>&nbsp; 
<a href="../object/tipMode.html">tipMode</a>&nbsp; 
<a href="../object/undoTip.html">undoTip</a>&nbsp; 
<a href="../object/unknownDest_.html">unknownDest_</a>&nbsp; 
<a href="../object/varDest_.html">varDest_</a>&nbsp; 
</code>
<a name="FunctionSummary_"></a><p><div class=mjhd><span class=hdln>Summary of Global Functions</span> &nbsp; </div><p>
<code>
<a href="#cls">cls</a>&nbsp; 
<a href="#decimalStr">decimalStr</a>&nbsp; 
<a href="#failedRestoreOptions">failedRestoreOptions</a>&nbsp; 
<a href="#findMatchingTopic">findMatchingTopic</a>&nbsp; 
<a href="#findPlayerChar">findPlayerChar</a>&nbsp; 
<a href="#finishGame">finishGame</a>&nbsp; 
<a href="#finishGameMsg">finishGameMsg</a>&nbsp; 
<a href="#getPlayerChar">getPlayerChar</a>&nbsp; 
<a href="#isEmptyStr">isEmptyStr</a>&nbsp; 
<a href="#isListSubset">isListSubset</a>&nbsp; 
<a href="#isValidIdentifierName">isValidIdentifierName</a>&nbsp; 
<a href="#makeMentioned">makeMentioned</a>&nbsp; 
<a href="#matchCase">matchCase</a>&nbsp; 
<a href="#nilToList">nilToList</a>&nbsp; 
<a href="#objOfKind">objOfKind</a>&nbsp; 
<a href="#overrides">overrides</a>&nbsp; 
<a href="#partitionList">partitionList</a>&nbsp; 
<a href="#processOptions">processOptions</a>&nbsp; 
<a href="#setPlayer">setPlayer</a>&nbsp; 
<a href="#str">str</a>&nbsp; 
<a href="#tryInt">tryInt</a>&nbsp; 
<a href="#tryNum">tryNum</a>&nbsp; 
<a href="#valToList">valToList</a>&nbsp; 
</code><p>
<a name="_Functions_"></a><p><div class=mjhd><span class=hdln>Global Functions</span> &nbsp; </div><p>
<a name="cls"></a>
<table class=decl><tr><td><code>cls ( )</code><td align=right><code><a href="../file/misc.t.html">misc.t</a>[<a href="../source/misc.t.html#420">420</a>]</table><div class=desc>   Clear the main game window.  In most cases, you should call this   rather than calling the low-level clearScreen() function directly,   since this routine takes care of a couple of chores that should   usually be done at the same time. <p>   First, we flush the transcript to ensure that no left-over reports   that were displayed before we cleared the screen will show up on the   new screen.  Second, we call the low-level clearScreen() function to   actually clear the display window.  Finally, we re-display any   &lt;ABOUTBOX&gt; tag, to ensure that the about-box will still be around;   this is necessary because any existing &lt;ABOUTBOX&gt; tag is lost after   the screen is cleared. <p>
</div>
<a name="decimalStr"></a>
<table class=decl><tr><td><code>decimalStr (val, decimalPlaces, =, 2)</code><td align=right><code><a href="../file/misc.t.html">misc.t</a>[<a href="../source/misc.t.html#2889">2889</a>]</table><div class=desc>   Function to return a string to display an integer (val) as a decimal number to decimalPlaces   decimal places, e.g. decimalStr(123, 2) -&gt; '1.23'. This provides a way of presenting integer   values, such as currency, as ones including decimal fractions. For example, we could use an   integer property (balance, say) in cents or pence but display it in dollars or pounds via   "$&lt;&lt;decimalStr(balance, 2)&gt;&gt;" or "ï¿½&lt;&lt;decimalStr(balance)&gt;&gt; (since decimalPlaced deftults to 2). <p>
</div>
<a name="failedRestoreOptions"></a>
<table class=decl><tr><td><code>failedRestoreOptions ( )</code><td align=right><code><a href="../file/misc.t.html">misc.t</a>[<a href="../source/misc.t.html#1086">1086</a>]</table><div class=desc>   Show failed startup restore options.  If a restore operation fails at   startup, we won't just proceed with the game, but ask the user what   they want to do; we'll offer the options of restoring another game,   quitting, or starting the game from the beginning. <p>
</div>
<a name="findMatchingTopic"></a>
<table class=decl><tr><td><code>findMatchingTopic (voc, cls, =, Topic)</code><td align=right><code><a href="../file/misc.t.html">misc.t</a>[<a href="../source/misc.t.html#1671">1671</a>]</table><div class=desc>   Find an existing Topic whose vocab is voc. If the cls parameter   is supplied it can be used to find a match in some other class, such as   Thing or Mentionable. <p>
</div>
<a name="findPlayerChar"></a>
<table class=decl><tr><td><code>findPlayerChar ( )</code><td align=right><code><a href="../file/misc.t.html">misc.t</a>[<a href="../source/misc.t.html#2809">2809</a>]</table><div class=desc>   The findPlayerChar() function is intended for internal library use only, to be called by   getPlayerChar() nothing else has yet defined the player character. The findPlayerChar()   function first iterates through every Thing defined in the game until it finds one that defines   isInitialPlayChar =  true. If it finds one it sets gPlayerChar to this value and returns the   player char object. Otherwise it creaates a new Player object, moves it into the first room it   finds, sets gPlayerChar to the new Player object, issues a warning to the game author that no   player char object has been explicitly defined in game code, and returns the new Player object.   This enaures that the calling function, getPlsyerChar(), will always be able to return a   non-nil object. <p>
</div>
<a name="finishGame"></a>
<table class=decl><tr><td><code>finishGame (extra)</code><td align=right><code><a href="../file/misc.t.html">misc.t</a>[<a href="../source/misc.t.html#1075">1075</a>]</table><div class=desc>finish the game, offering the given extra options but no message<p>
</div>
<a name="finishGameMsg"></a>
<table class=decl><tr><td><code>finishGameMsg (msg, extra)</code><td align=right><code><a href="../file/misc.t.html">misc.t</a>[<a href="../source/misc.t.html#1017">1017</a>]</table><div class=desc>   Finish the game, showing a message explaining why the game has ended.   This can be called when an event occurs that ends the game, such as   the player character's death, winning, or any other endpoint in the   story. <p>   We'll show a message defined by 'msg', using a standard format.  The   format depends on the language, but in English, it's usually the   message surrounded by asterisks: "*** You have won! ***".  'msg' can   be: <p> <br>   - nil, in which case we display nothing <br>   - a string, which we'll display as the message <br>   - a FinishType object, from which we'll get the message <p>   After showing the message (if any), we'll prompt the user with   options for how to proceed.  We'll always show the QUIT, RESTART, and   RESTORE options; other options can be offered by listing one or more   FinishOption objects in the 'extra' parameter, which is given as a   list of FinishOption objects.  The library defines a few non-default   finish options, such as finishOptionUndo and finishOptionCredits; in   addition, the game can subclass FinishOption to create its own custom   options, as desired. <p>
</div>
<a name="getPlayerChar"></a>
<table class=decl><tr><td><code>getPlayerChar ( )</code><td align=right><code><a href="../file/misc.t.html">misc.t</a>[<a href="../source/misc.t.html#2788">2788</a>]</table><div class=desc>Failsafe Function to get the player character object<p>
</div>
<a name="isEmptyStr"></a>
<table class=decl><tr><td><code>isEmptyStr (str)</code><td align=right><code><a href="../file/misc.t.html">misc.t</a>[<a href="../source/misc.t.html#2037">2037</a>]</table><div class=desc>A string is empty if it's nil or if when trimmed it's ''<p>
</div>
<a name="isListSubset"></a>
<table class=decl><tr><td><code>isListSubset (a, b)</code><td align=right><code><a href="../file/misc.t.html">misc.t</a>[<a href="../source/misc.t.html#1644">1644</a>]</table><div class=desc>   Determine if list a is a subset of list b.  a is a subset of b if   every element of a is in b. <p>
</div>
<a name="isValidIdentifierName"></a>
<table class=decl><tr><td><code>isValidIdentifierName (str)</code><td align=right><code><a href="../file/misc.t.html">misc.t</a>[<a href="../source/misc.t.html#2859">2859</a>]</table><div class=desc>Determine whether str is a valid identifier<p>
</div>
<a name="makeMentioned"></a>
<table class=decl><tr><td><code>makeMentioned (obj)</code><td align=right><code><a href="../file/misc.t.html">misc.t</a>[<a href="../source/misc.t.html#1611">1611</a>]</table><div class=desc>   Set the mentioned property of obj to true. If obj is supplied as a list,   set every object's mentioned property in the list to true. This can be used   in room and object descriptions to mark an object as mentioned so it won't   be included in the listing. <p>
</div>
<a name="matchCase"></a>
<table class=decl><tr><td><code>matchCase (newTok, oldTok)</code><td align=right><code><a href="../file/misc.t.html">misc.t</a>[<a href="../source/misc.t.html#2516">2516</a>]</table><div class=desc>   Change the case (upper/lower) of a given new string to match the case   pattern of the given original string. <p>   We recognize four patterns: <p>   - If the original string has at least one capital letter and no   minuscules, we convert the new string to all caps.  For example,   matchCase('ALPHA-1', 'omicron-7') yields 'OMICRON-7'. <p>   - If the original string has at least one lower-case letter and no   capitals, we convert the new string to all lower case.  E.g.,   matchCase('alpha-1', 'OMICRON-7') yields 'omicron-7'. <p>   - If the original string starts with a capital letter, and has at   least one lower-case letter and no other capitals, we capitalize the   first letter of the new string and lower-case everything else. E.g.,   matchCase('Alpha-1', 'OMICRON-7') yields 'Omicron-7'. <p>   - Otherwise, we match the case pattern of the input string letter for   letter: for each upper-case letter in the original, we capitalize the   letter at the corresponding character index in the new string, and   likewise with lower-case letters in the original.  We leave other   characters unchanged.  E.g., matchCase('AlPhA-1', 'omicron-7') yields   'OmIcRon-7'. <p>
</div>
<a name="nilToList"></a>
<table class=decl><tr><td><code>nilToList (val)</code><td align=right><code><a href="../file/misc.t.html">misc.t</a>[<a href="../source/misc.t.html#1577">1577</a>]</table><div class=desc>   nilToList - convert a 'nil' value to an empty list.  This can be   useful for mix-in classes that will be used in different inheritance   contexts, since the classes might or might not inherit a base class   definition for list-valued methods such as preconditions.  This   provides a usable default for list-valued methods that return nothing   from superclasses. <p>
</div>
<a name="objOfKind"></a>
<table class=decl><tr><td><code>objOfKind (obj, cls)</code><td align=right><code><a href="../file/misc.t.html">misc.t</a>[<a href="../source/misc.t.html#2784">2784</a>]</table><div class=desc>Service function to determine whether obj is ofKind cls when obj might not be an object.<p>
</div>
<a name="overrides"></a>
<table class=decl><tr><td><code>overrides (obj, base, prop)</code><td align=right><code><a href="../file/misc.t.html">misc.t</a>[<a href="../source/misc.t.html#436">436</a>]</table><div class=desc>   Determine if the given object overrides the definition of the given   property inherited from the given base class.  Returns true if the   object derives from the given base class, and the object's definition   of the property comes from a different place than the base class's   definition of the property. <p>
</div>
<a name="partitionList"></a>
<table class=decl><tr><td><code>partitionList (lst, fn)</code><td align=right><code><a href="../file/misc.t.html">misc.t</a>[<a href="../source/misc.t.html#1632">1632</a>]</table><div class=desc>   partitionList - partition a list into a pair of two lists, the first   containing items that match the predicate 'fn', the second containing   items that don't match 'fn'.  'fn' is a function pointer (usually an   anonymous function) that takes a single argument - a list element -   and returns true or nil. <p>   The return value is a list with two elements.  The first element is a   list giving the elements of the original list for which 'fn' returns   true, the second element is a list giving the elements for which 'fn'   returns nil. <p>   (Contributed by Tommy Nordgren.) <p>
</div>
<a name="processOptions"></a>
<table class=decl><tr><td><code>processOptions (lst)</code><td align=right><code><a href="../file/misc.t.html">misc.t</a>[<a href="../source/misc.t.html#1097">1097</a>]</table><div class=desc>   Process a list of finishing options.  We'll loop, showing prompts and   reading responses, until we get a response that terminates the loop. <p>
</div>
<a name="setPlayer"></a>
<table class=decl><tr><td><code>setPlayer (actor, person, =, 2)</code><td align=right><code><a href="../file/misc.t.html">misc.t</a>[<a href="../source/misc.t.html#1687">1687</a>]</table><div class=desc>   Set the player character to another actor. If the optional second parameter   is supplied, it sets the person of the player character; otherwise it   defaults to the second person. <p>
</div>
<a name="str"></a>
<table class=decl><tr><td><code>str (val, radix?, isSigned?)</code><td align=right><code><a href="../file/misc.t.html">misc.t</a>[<a href="../source/misc.t.html#1559">1559</a>]</table><div class=desc>   Function to return the string representation of val. This is essentially the same as the   intrinsic function toSrring with the added ability of also working with enuma. <p>
</div>
<a name="tryInt"></a>
<table class=decl><tr><td><code>tryInt (val)</code><td align=right><code><a href="../file/misc.t.html">misc.t</a>[<a href="../source/misc.t.html#1459">1459</a>]</table><div class=desc>   Try converting val to an integer. If this results in an integer value,   return it, otherwise return nil. <p>
</div>
<a name="tryNum"></a>
<table class=decl><tr><td><code>tryNum (val)</code><td align=right><code><a href="../file/misc.t.html">misc.t</a>[<a href="../source/misc.t.html#1512">1512</a>]</table><div class=desc>   Try converting val to a number (integer or BigNumber); return the number if   there is one, otherwise return nil. <p>
</div>
<a name="valToList"></a>
<table class=decl><tr><td><code>valToList (val)</code><td align=right><code><a href="../file/misc.t.html">misc.t</a>[<a href="../source/misc.t.html#1587">1587</a>]</table><div class=desc>   val to list - convert any value to a list. If it's already a list, simply   return it. If it's nil return an empty list. If it's a singleton value,   return a one-element list containing it. <p>
</div>
<div class=ftr>Adv3Lite Library Reference Manual<br>Generated on 03/03/2025 from adv3Lite version 2.2.0.3</div>
</body>
</html>
