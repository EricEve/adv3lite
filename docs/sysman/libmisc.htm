<html>
<!-- DERIVED FILE - DO NOT EDIT -->

<head>
<title>Miscellaneous Library Definitions</title>
<link rel="stylesheet" href="sysman.css" type="text/css">
</head>
<body>
<div class="topbar"><img src="topbar.jpg" border=0></div>
<div class="nav">
<a class="nav" href="toc.htm">Table of Contents</a> | 
<a class="nav" href="lib.htm">The System Library</a> &gt; 
Miscellaneous Library Definitions
<br><span class="navnp"><a class="nav" href="tok.htm"><i>Prev:</i> Basic Tokenizer</a> &nbsp;&nbsp;&nbsp; <a class="nav" href="nodef.htm"><i>Next:</i> Replacing the System Library</a> &nbsp;&nbsp;&nbsp; </span>

</div>
<div class="main">

<h1>Miscellaneous Library Definitions</h1>

<p>This section describes a few miscellaneous functions and classes
that the system library defines.

<h2>Functions</h2>

<p><span class="code">forEachInstance(<i>cls</i>, <i>func</i>)</span>
<div class=fdef>

This function is a simple object "iterator" function; it iterates (in
arbitrary order) over all instances of the class given by the
<i>cls</i> argument, and for each instance invokes the function given
by <i>func</i>, passing the current instance as the function's single
argument.

<p>This function is a convenience.  You can use it as an alternative
to writing a loop involving the firstObj/nextObj functions.  For
example, to set the <span class="code">isAnimate</span> property for all instances of Actor:

<p><div class="code"><pre>
forEachInstance(Actor, {obj: obj.isAnimate = true});
</pre></div>

</div>

<p><span class="code">_default_display_fn(<i>val</i>)</span>
<div class=fdef>

This function simply calls the function <span class="code">tadsSay(val)</span> from the
<a href='tadsio.htm'>tads-io</a> intrinsic function set.  It's
defined as a function here simply so that the library can register
it with the VM as the default display function.

</div>

<h2>Classes</h2>

<p><span class="code">class Exception: object</span>
<div class=fdef>

This class is defined to serve as the base class for all exceptions,
including run-time errors and program-defined exceptions.  The class
defines a method, <span class="code">displayException()</span>, that should be overridden in
all subclasses to display an appropriate message describing the
exception.

</div>

<p><span class="code">class RuntimeError: Exception</span>
<div class=fdef>

This class is the base class for all run-time exceptions that the VM
itself throws.

</div>

<p><span class="code">class ModuleExecObject: object</span>
<div class=fdef>

This is the base class for PreinitObject and InitObject.  (See
the section on <a href='init.htm'>initialization</a> for full
details on these objects.)

</div>

<p><span class="code">mainGlobal: object</span>
<div class=fdef>

This object simply serves as a repository for global variables for the
system library.  In particular, this object's property <span class="code">preinited_</span>
stores the pre-initialization status; this property is set to <span class="code">true</span>
after pre-initialization has been completed, so that the library knows
that the process won't have to be repeated when the program is started.

</div>

</div>
<hr class="navb"><div class="navb">
<i>TADS 3 System Manual</i><br>
<a class="nav" href="toc.htm">Table of Contents</a> | 
<a class="nav" href="lib.htm">The System Library</a> &gt; 
Miscellaneous Library Definitions
<br><span class="navnp"><a class="nav" href="tok.htm"><i>Prev:</i> Basic Tokenizer</a> &nbsp;&nbsp;&nbsp; <a class="nav" href="nodef.htm"><i>Next:</i> Replacing the System Library</a> &nbsp;&nbsp;&nbsp; </span>

</div>
</body>
</html>

