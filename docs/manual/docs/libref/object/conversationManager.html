<html>
<head><link rel=stylesheet type="text/css" href="../libref.css"><title>conversationManager</title></head><body>
<table class=ban><tr><td align=left><span class=title>conversationManager</span><span class=type>object</span><td align=right><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#4850">4850</a>]</table><p>
<table class=nav><tr>
<td><a href="#_SuperClassTree_">Superclass<br>Tree</a>
<td><a href="#_PropSummary_">Property<br>Summary</a>
<td><a href="#_MethodSummary_">Method<br>Summary</a>
<td><a href="#_Properties_">Property<br>Details</a>
<td><a href="#_Methods_">Method<br>Details</a>
</table><div class=fdesc>
   Conversation manager output filter.  We look for special tags in the output   stream: <p>   &lt;.reveal key&gt; - add 'key' to the knowledge token lookup table.  The 'key'   is an arbitrary string, which we can look up in the table to determine if   the key has even been revealed.  This can be used to make a response   conditional on another response having been displayed, because the key will   only be added to the table when the text containing the &lt;.reveal key&gt;   sequence is displayed. <p>   &lt;.inform key&gt; - add 'key' to our actor's knowledge token lookup take. The   'key' is an arbitrary string, which we can look up in the table to   determine if the actor has ever been informed about this key.  This can be   used to make a response conditional on another response having been   displayed, because the key will only be added to the information table when   the text containing the &lt;.inform key&gt; sequence is displayed. <p>   &lt;.convnode name&gt; - add 'name' to the current list of convKeys (this   actually adds it to the actor's pendingKeys for use on the next turn); this   is normally used to trigger a Conversation Node that's defined to match the   same name. <p>   &lt;.convodet name&gt; does the same as &lt;.convnode name&gt; and additionally   schedules a topic inventory (a listing of suggested topics); this can be   used to ensure that the player knows what conversational options are   available in the node we're about to enter, where this isn't obvious from   the context. <p>   &lt;.convstay&gt; - retain the same list of active keys for the next   conversational response (and thus has the effect of making the conversation   remain in the same conversation node). <p>   &lt;.convstayt&gt; - does the same as &lt;.convstay&gt; but additionally schedules a   topic inventory. <p>   &lt;.topics&gt; - schedule a topic inventory for the end of the turn (just before   the next command prompt) <p>   &lt;.arouse key&gt; Set the curiosityAroused property to true for all   TopicEntries whose convKeys include key <p>   &lt;.suggest key&gt; Schedule a topic inventory for all topic entries whose   convKeys include key. <p>   &lt;.sugkey key&gt; Set our actor's suggestionKey to key (this potentially   restricts the list of topics that will be suggested) <p>   &lt;.activate key&gt; Set the activated property to true for every topic entry   whose convKeys list includes key. <p>   &lt;.agenda item&gt; Add item to the agenda list of our Actor and any associated   DefaultAgendaTopics. <p>   &lt;.remove item&gt; Remove item from the agenda list of our Actor and any   associated DefaultAgendaTopics. <p>   &lt;.state newstate&gt; Change our actor's current ActorState to newstate. <p>   &lt;.known obj&gt; Mark obj (a Thing or Topic) as now being known (i.e. familiar) 
<p>
<code><b>conversationManager</b> :  &nbsp; <a href="../object/OutputFilter.html">OutputFilter</a> &nbsp; <a href="../object/PreinitObject.html">PreinitObject</a></code>
</div>
<a name="_SuperClassTree_"></a><p><div class=mjhd><span class=hdln>Superclass Tree</span> &nbsp; (in declaration order)</div><p>
<code><b>conversationManager</b></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp; <a href="../object/OutputFilter.html">OutputFilter</a></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp; object</code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp; <a href="../object/PreinitObject.html">PreinitObject</a></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp; <a href="../object/ModuleExecObject.html">ModuleExecObject</a></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp; object</code><br>
<a name="_PropSummary_"></a><p><div class=mjhd><span class=hdln>Summary of Properties</span> &nbsp; </div><p>
<code>
<a href="#convnodeSetTurn">convnodeSetTurn</a>&nbsp; 
<a href="#customTags">customTags</a>&nbsp; 
<a href="#idToActor">idToActor</a>&nbsp; 
<a href="#objNameTab">objNameTab</a>&nbsp; 
<a href="#pendingTopicInventory">pendingTopicInventory</a>&nbsp; 
<a href="#pendingTopicInventoryKey">pendingTopicInventoryKey</a>&nbsp; 
<a href="#respondingActor">respondingActor</a>&nbsp; 
<a href="#tagPat">tagPat</a>&nbsp; 
</code><p>
<code>
</code><p>
<p>Inherited from <code>PreinitObject</code> :<br>
<code>
<a href="../object/PreinitObject.html#execBeforeMe">execBeforeMe</a>&nbsp; 
<a href="../object/PreinitObject.html#reverseGlobalSymbols">reverseGlobalSymbols</a>&nbsp; 
</code><p>
<p>Inherited from <code>ModuleExecObject</code> :<br>
<code>
<a href="../object/ModuleExecObject.html#execAfterMe">execAfterMe</a>&nbsp; 
<a href="../object/ModuleExecObject.html#hasInitialized_">hasInitialized_</a>&nbsp; 
<a href="../object/ModuleExecObject.html#isDoingExec_">isDoingExec_</a>&nbsp; 
<a href="../object/ModuleExecObject.html#isExecuted_">isExecuted_</a>&nbsp; 
</code><p>
<a name="_MethodSummary_"></a><p><div class=mjhd><span class=hdln>Summary of Methods</span> &nbsp; </div><p>
<code>
<a href="#doCustomTag">doCustomTag</a>&nbsp; 
<a href="#execute">execute</a>&nbsp; 
<a href="#filterText">filterText</a>&nbsp; 
<a href="#manageKeys">manageKeys</a>&nbsp; 
<a href="#scheduleTopicInventory">scheduleTopicInventory</a>&nbsp; 
<a href="#setInformed">setInformed</a>&nbsp; 
<a href="#setRevealed">setRevealed</a>&nbsp; 
<a href="#showAgendaError">showAgendaError</a>&nbsp; 
<a href="#showKnownError">showKnownError</a>&nbsp; 
<a href="#showObjDoesNotBelongToActorError">showObjDoesNotBelongToActorError</a>&nbsp; 
<a href="#showObjNotExistError">showObjNotExistError</a>&nbsp; 
<a href="#showStateError">showStateError</a>&nbsp; 
<a href="#showWrongKindofObjectError">showWrongKindofObjectError</a>&nbsp; 
<a href="#topicInventoryDaemon">topicInventoryDaemon</a>&nbsp; 
</code><p>
<code>
</code><p>
<code>
</code><p>
<p>Inherited from <code>ModuleExecObject</code> :<br>
<code>
<a href="../object/ModuleExecObject.html#_execute">_execute</a>&nbsp; 
<a href="../object/ModuleExecObject.html#classExec">classExec</a>&nbsp; 
</code><p>
<a name="_Properties_"></a><p><div class=mjhd><span class=hdln>Properties</span> &nbsp; </div><p>
<a name="convnodeSetTurn"></a>
<table class=decl><tr><td><code>convnodeSetTurn</code><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#5196">5196</a>]</table><div class=desc>The turn on which we last processed a convnode tag<p>
</div>
<a name="customTags"></a>
<table class=decl><tr><td><code>customTags</code><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#4868">4868</a>]</table><div class=desc>   Custom extended tags.  Games and library extensions can add their   own tag processing as needed, by using 'modify' to extend this   object.  There are two things you have to do to add your own tags: <p>   First, add a 'customTags' property that defines a regular   expression for your added tags.  This will be incorporated into   the main pattern we use to look for tags.  Simply specify a   string that lists your tags separated by "|" characters, like   this: <p>   customTags = 'foo|bar' <p>   Second, define a doCustomTag() method to process the tags.  The   filter routine will call your doCustomTag() method whenever it   finds one of your custom tags in the output stream. <p>
</div>
<a name="idToActor"></a>
<table class=decl><tr><td><code>idToActor</code><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#5400">5400</a>]</table><div class=desc>a vector of actors, indexed by their convMgrID values<p>
</div>
<a name="objNameTab"></a>
<table class=decl><tr><td><code>objNameTab</code><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#5450">5450</a>]</table><div class=desc><i>no description available</i><p>
</div>
<a name="pendingTopicInventory"></a>
<table class=decl><tr><td><code>pendingTopicInventory</code><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#5445">5445</a>]</table><div class=desc>flag: we have a pending prompt-time topic inventory request<p>
</div>
<a name="pendingTopicInventoryKey"></a>
<table class=decl><tr><td><code>pendingTopicInventoryKey</code><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#5448">5448</a>]</table><div class=desc>The key to use for the pending prompt-time inventory request<p>
</div>
<a name="respondingActor"></a>
<table class=decl><tr><td><code>respondingActor</code><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#4875">4875</a>]</table><div class=desc>   The actor we're dealing with is the player character's current   interlocutor <p>
</div>
<a name="tagPat"></a>
<table class=decl><tr><td><code>tagPat</code><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#5199">5199</a>]</table><div class=desc>regular expression pattern for our tags<p>
</div>
<a name="_Methods_"></a><p><div class=mjhd><span class=hdln>Methods</span> &nbsp; </div><p>
<a name="doCustomTag"></a>
<table class=decl><tr><td><code>doCustomTag (tag, arg)</code><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#4869">4869</a>]</table><div class=desc><i>no description available</i><p>
</div>
<a name="execute"></a>
<table class=decl><tr><td><code>execute ( )</code><span class=rem>OVERRIDDEN</span><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#5403">5403</a>]</table><div class=desc>preinitialize<p>
</div>
<a name="filterText"></a>
<table class=decl><tr><td><code>filterText (ostr, txt)</code><span class=rem>OVERRIDDEN</span><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#4878">4878</a>]</table><div class=desc>filter text written to the output stream<p>
</div>
<a name="manageKeys"></a>
<table class=decl><tr><td><code>manageKeys ( )</code><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#5208">5208</a>]</table><div class=desc>Provided we have a respondingActor, call its manageKeys method.<p>
</div>
<a name="scheduleTopicInventory"></a>
<table class=decl><tr><td><code>scheduleTopicInventory (key, =, nil)</code><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#5221">5221</a>]</table><div class=desc>   Schedule a topic inventory request.  Game code can call this at   any time to request that the player character's topic inventory   be shown automatically just before the next command prompt.  In   most cases, game code won't call this directly, but will request   the same effect using the &lt;.topics&gt; tag in topic response text. <p>
</div>
<a name="setInformed"></a>
<table class=decl><tr><td><code>setInformed (tag)</code><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#5282">5282</a>]</table><div class=desc>   Notify every actor who's in a position to hear that we've just imparted   some information. <p>
</div>
<a name="setRevealed"></a>
<table class=decl><tr><td><code>setRevealed (tag)</code><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#5248">5248</a>]</table><div class=desc>   Mark a tag as revealed.  This adds an entry for the tag to the   revealedNameTab table.  We simply set the table entry to 'true'; the   presence of the tag in the table constitutes the indication that the   tag has been revealed. <p>   (Games and library extensions can use 'modify' to override this and   store more information in the table entry.  For example, you could   store the time when the information was first revealed, or the location   where it was learned.  If you do override this, just be sure to set the   revealedNameTab entry for the tag to a non-nil and non-zero value, so   that any code testing the presence of the table entry will see that the   slot is indeed set.) <p>   The actual method and the revealedNameTab are on libGlobal rather than   here in order to make them available to games that don't include   actor.t. <p>
</div>
<a name="showAgendaError"></a>
<table class=decl><tr><td><code>showAgendaError (tag, arg)</code><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#5316">5316</a>]</table><div class=desc>   Display an error message if the game code tries to add or remove agenda   items from an agendaList using a &lt;.agenda item&gt; or &lt;.remove item&gt; tag,   when item doesn't correspond to a valid AgendaItem, but only do so if   the game has been compiled for debugging. <p>
</div>
<a name="showKnownError"></a>
<table class=decl><tr><td><code>showKnownError (tag, arg)</code><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#5358">5358</a>]</table><div class=desc>   Display an error message if the game code tries mark an object as known   about using a &lt;.known obj&gt; tag, when obj doesn't correspond to a valid   Mentionable object, but only do so if the game has been compiled for   debugging. <p>
</div>
<a name="showObjDoesNotBelongToActorError"></a>
<table class=decl><tr><td><code>showObjDoesNotBelongToActorError (tag, arg, typ)</code><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#5392">5392</a>]</table><div class=desc>The object referred to by tag doesn't belong to the actor in question<p>
</div>
<a name="showObjNotExistError"></a>
<table class=decl><tr><td><code>showObjNotExistError (tag, arg, typ)</code><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#5377">5377</a>]</table><div class=desc>The object referred to by tag doesn't exist<p>
</div>
<a name="showStateError"></a>
<table class=decl><tr><td><code>showStateError (tag, arg)</code><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#5338">5338</a>]</table><div class=desc>   Display an error message if the game code tries to change our actor's   ActorState via a &lt;.state newstate&gt; tag, when tag doesn't correspond to   a valid ActorState, but only do so if the game has been compiled for   debugging. <p>
</div>
<a name="showWrongKindofObjectError"></a>
<table class=decl><tr><td><code>showWrongKindofObjectError (tag, arg, typ)</code><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#5385">5385</a>]</table><div class=desc>The object referred to by tag is the wrong sort of object<p>
</div>
<a name="topicInventoryDaemon"></a>
<table class=decl><tr><td><code>topicInventoryDaemon ( )</code><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#5423">5423</a>]</table><div class=desc>   Prompt daemon: show topic inventory when appropriate.  When a   response explicitly asks us to show a topic inventory using the   &lt;.topics&gt; tag, or when other game code asks us to show topic   inventory by calling scheduleTopicInventory(), we'll show the   inventory just before the command input prompt. <p>
</div>
<div class=ftr>Adv3Lite Library Reference Manual<br>Generated on 28/03/2016 from adv3Lite version 1.5</div>
</body>
</html>
